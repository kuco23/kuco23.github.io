<!DOCTYPE html><html><head><title>Snake</title><meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8"><script src="https://code.jquery.com/jquery-latest.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Indie+Flower|Bungee+Hairline"><link rel="stylesheet" type="text/css" href="/index.35bdaf68.css"><link rel="stylesheet" type="text/css" href="/index.27e1ef2f.css"><link rel="stylesheet" type="text/css" href="/index.f69cb75b.css"><link rel="stylesheet" type="text/css" href="/index.638f619c.css"><link rel="stylesheet" type="text/css" href="/index.9e8355b7.css"><script></script><script type="module">class t{constructor(t,s){this.x=t,this.y=s}norm(){return Math.sqrt(this.x*this.x+this.y*this.y)}normed(){let s=this.norm();return new t(this.x/s,this.y/s)}mul(s){return new t(this.x*s,this.y*s)}}class s{constructor(t,s){this.x=t,this.y=s}subtract(s){return new t(this.x-s.x,this.y-s.y)}}class i{constructor(t,i,e,r,n){this.length=t,this.radius=i,this.speed=e,this.parts=[];for(let i=0;i<t;i++)this.parts.push(new s(r,n)),r-=2*this.radius}move(t,s){let i=0,e=Math.max(window.innerHeight,window.innerWidth);for(let s=0;s<this.length;s++){let r=t.subtract(this.parts[s]).norm();r<e&&(i=s,e=r)}if(e+this.speed<this.radius+s)return!1;let r=this.parts[i],n=t.subtract(r).normed().mul(this.speed);r.x+=n.x,r.y+=n.y;let h=i;for(let t=0;t<this.length-1;t++){let t=this.parts[h%this.length],s=this.parts[(h+1)%this.length],i=t.subtract(s).norm();if(i>2*this.radius+this.speed){let i=t.subtract(s).normed().mul(this.speed);s.x+=i.x,s.y+=i.y}else{let i=t.subtract(s).normed().mul(2*this.radius);s.x=t.x-i.x,s.y=t.y-i.y}h++}return!0}}class e{constructor(t,s,i,e){this.speed=t,this.radius=s,this.x=i,this.y=e}move(t){t[0]&&this.y>=this.speed+this.radius&&(this.y-=this.speed),t[1]&&this.x+this.speed+this.radius<=window.innerWidth&&(this.x+=this.speed),t[2]&&this.y+this.speed+this.radius<=window.innerHeight&&(this.y+=this.speed),t[3]&&this.x>=this.speed+this.radius&&(this.x-=this.speed)}}class r{constructor(t){this.config=t}drawPoint(t,s,i){this.config.context.fillStyle=i,this.config.context.beginPath(),this.config.context.arc(t.x,t.y,s,0,2*Math.PI),this.config.context.fill()}drawSnake(t){for(let s=0;s<t.length;s++)this.drawPoint(t.parts[s],t.radius,this.config.snakeColor)}drawPlayer(t){this.drawPoint(new s(t.x,t.y),t.radius,this.config.playerColor)}clear(){this.config.context.clearRect(0,0,this.config.canvas.width,this.config.canvas.height)}draw(t,s){this.drawSnake(t),this.drawPlayer(s)}move(t,i,e){this.clear();let r=t.move(new s(i.x,i.y),i.radius);return!!r&&(i.move(e),this.draw(t,i),!0)}}class n{constructor(t){this.config=t,this.direction=[!1,!1,!1,!1],this.inProgress=!1,this.graphics=new r(t.graphics),this.snake=this.snakeFromConfig(),this.player=this.playerFromConfig()}setDirectionFromKey(t,s){switch(t){case"ArrowUp":this.direction[0]=s;break;case"ArrowRight":this.direction[1]=s;break;case"ArrowDown":this.direction[2]=s;break;case"ArrowLeft":this.direction[3]=s}}snakeFromConfig(){return new i(this.config.snake.length,this.config.snake.radius,this.config.snake.speed,this.config.snake.x,this.config.snake.y)}playerFromConfig(){return new e(this.config.player.speed,this.config.player.radius,this.config.player.x,this.config.player.y)}setEventListeners(){let t=this;window.addEventListener("keydown",function(s){t.setDirectionFromKey(s.key,!0)},!1),window.addEventListener("keyup",function(s){t.setDirectionFromKey(s.key,!1)},!1)}start(){this.inProgress=!0,this.setEventListeners(),this.snake=this.snakeFromConfig(),this.player=this.playerFromConfig(),this.graphics.draw(this.snake,this.player),this.interval=setInterval(this.update.bind(this),1e3/this.config.framesPerSec)}update(){let t=this.graphics.move(this.snake,this.player,this.direction);t||this.end(!1)}end(t){this.inProgress=!1,this.graphics.clear(),clearInterval(this.interval),onEndGame(t)}}$(document).ready(function(){_resizeCanvas();let t=document.getElementById("game-canvas");document.game=new n({player:{speed:2,radius:10,x:t.width/2,y:t.height-40},snake:{length:20,radius:10,speed:1.2,x:t.width/2,y:t.height/2},graphics:{canvas:t,context:t.getContext("2d"),snakeColor:"black",playerColor:"black"},framesPerSec:50})}),$(window).on("resize",function(){document.game.inProgress&&(alert("I didn't spend my time making this game just so you could resize the fucking window."),document.game.end()),_resizeCanvas()});</script></head><body> <div id="menu-panel-container" class="align-center"> <div id="menu-panel" class="base-panel"> <span id="title">SNAKE</span> <a onclick="startGame()">Start</a> <a style="cursor:not-allowed">Game&nbsp;Mode</a> <a onclick="toInfo()">Info</a> <a onclick="toSettings()">Settings</a> </div> </div> <div id="settings-panel-container" class="align-center"> <div id="settings-panel" class="base-panel"> <div id="saved-stamp"> SAVED </div> <div> Snake&nbsp;length: <span id="snake-length-output"></span><br> <input type="range" id="snake-length" name="snake-length" min="1" max="40" value="20" class="slider"><br> Snake&nbsp;color:<br> <input type="text" id="snake-color" name="snake-color" class="snake-text-input"><br> Player&nbsp;color:<br> <input type="text" id="player-color" name="player-color" class="snake-text-input"><br> <div class="settings-buttons"> <span onclick="saveSettings()">Save</span> <span onclick="toMenu()">Go&nbsp;Back</span> </div> </div> </div> </div> <div id="info-panel-container" class="align-center"> <div id="info-panel" class="base-panel"> <div id="info-content"> There's no way to win, because you are a part of snake's body and it is its right to reclaim you. You can move freely though with the arrow keys. </div> <div class="to-menu-button"> <span onclick="toMenu()">Go&nbsp;Back</span> </div> </div> </div> <canvas id="game-canvas"> </canvas> <div id="game-over-div" class="game-over-panel"> <div> <span>Y</span><span>O</span><span>U</span>&nbsp; <span>W</span><span>O</span><span>N</span> </div> <div> <span>Y</span><span>O</span><span>U</span>&nbsp; <span>L</span><span>O</span><span>S</span><span>T</span> </div> <div> Play&nbsp;Again:&nbsp; <span onclick="restartGame()">Y</span>/<span onclick="toMenu()">N</span> </div> </div> </body></html>