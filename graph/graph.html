<!DOCTYPE html>

<html>
<head>

  <meta name='viewport' content='width=device-width, initial-scale=1.0' charset='utf-8' />
  <title>Graphs and DFS</title>
  <link rel='stylesheet' type='text/css' href='main.css' />
  <script src = '../jquery-3.3.1.min.js'></script>

  <style>
  </style>

  <script>

    // dfs state (backtracking display)
    // edge css display

    function toggleMode(mode) {
      let modes = ['nodeSelectionMode', 'nodeCreationMode',
                   'dfsMode', 'shortestDistMode'];
      let button = [['TURN ON', 'lime'], ['TURN OFF', 'red']];
      for (let i = 0; i < modes.length; i++) {
        if (mode != modes[i]) {
          document.graph[modes[i]] = false;
          $('#' + modes[i] + 'Btn').html(button[0][0]).css('color', button[0][1]);
        }
      }
      document.graph[mode] = !document.graph[mode];
      let setsTo = button[Number(document.graph[mode])];
      $('#' + mode + 'Btn').html(setsTo[0]).css('color', setsTo[1]);
    }

    $(document).ready(function() {
      $.when(
        $.getScript("graphlib/graph.js")
      ).done(function(){

        $('#canvus').attr({
          height: window.innerHeight,
          width: window.innerWidth * 0.75
        });

        var canvas = document.getElementById('canvus');
        var context = canvas.getContext('2d');
        document.graph = new Graph(context);

        canvas.addEventListener('click', function(event) {
          document.graph.handleClick(event.pageX, event.pageY);
        });
        document.addEventListener('keydown', function(event) {
          if (event.keyCode == 32) document.graph.linkSelected();
        });
        window.onresize = function() {
          $('#canvus').attr({
            height: window.innerHeight,
            width: window.innerWidth * 0.75
          });
          document.graph.reset();
        };

      });
    });

  </script>

</head>
<body>

<canvas id='canvus' width=500 height=500>
</canvas>

<div class='options'>
  <div class='title-button'>
    <span title='Toggle creation and removal of a node by clicking
    on its position or its placeholder'>Manual Node Creation Mode</span>
    <button onclick = 'toggleMode("nodeCreationMode");' id='nodeCreationModeBtn'>
      TURN ON
    </button>
  </div>
  <div class='title-button'>
    <span title='select two nodes by clicking on them and
    then connect them by clicking Connect or pressing spacebar'>
      Manual Node Selection Mode
    </span>
    <button onclick='toggleMode("nodeSelectionMode");' id='nodeSelectionModeBtn'>
      TURN ON
    </button>
    <button onclick='graph.linkSelected();'>Link</button>
    <button onclick='graph.unlinkSelected();'>Unlink</button>
  </div>
  <div class='title-button'>
    <span>Manual dfs/bfs Starting Node Selection Mode</span>
    <button onclick='toggleMode("dfsMode");' id='dfsModeBtn'>
      TURN ON
    </button>
    <button onclick='graph.dfs();'>Run DFS</button>
    <button onclick='graph.bfs();'>Run BFS</button>
    <button onclick='graph.getShortestDistance();'>Find Shortest Distance</button>
  </div>
  <button onclick='graph.redraw();'>Remove Coloring</button>
  <button onclick='graph.reset();'>Clear</button>
</div>

<div class='screenToSmall'>
  Sorry, but your screen is too small
</div>

</body>
</html>
